#-----------------------------------------------------------------------------------------------------------------------
# Minimum Starting Point recipe
#
# Self contained Spinnaker installation with no external dependencies and no additional configuration needed.
# This is intended as a starting point for any kubernetes cluster.
# Not for production use.
#
# Features:
# - One Kubernetes account (Spinnaker's own cluster) for deployment targets
# - Spinnaker authentication disabled
# - Self hosted minio as a persistent storage
# - Self hosted redis backend for caching and temporal storage of services
#-----------------------------------------------------------------------------------------------------------------------
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: daniela-dev

components:
  - core/base
#  - core/persistence/in-cluster
#  - targets/aws/base
  - targets/kubernetes/default

patchesStrategicMerge:
  - core/patches/version.yml
#  - plugins/patch-plugin-wait.yml
#  - armory/patch-terraformer.yml
#  - armory/patch-multiple-pipelines.yml
#  - persistence/patch-sql-orca.yml
#  - plugins/external-accounts/patch-external-accounts-plugin-sidecar.yml
#  - spinnaker_deployment/patch-debug-jvm.yml
#  - infrastructure/patch-clouddriver-image.yml
#  - targets/azure/default/patches/packer-templates/packer-templates.yml
#  - security/patch-external-authz.yml
#  - security/patch-file-authz.yml
#  - security/patch-fiat-create-app-roles.yml
#  - security/patch-github.yml
#  - core/patches/ui-feature-flags.yml
#  - armory/features/pipelines-as-code/feature.yml

transformers:
  - utilities/unique-service-account.yml

#secretGenerator:
#  - name: pac-secret
#    options:
#      disableNameSuffixHash: true
#    literals:
#      - github-token=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
